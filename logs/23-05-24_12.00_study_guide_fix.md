# Session Log - Study Guide Fix - 2024-05-23

## Objective
Fix Study guide page issues, CSV fetching, Audit report, UI issues, and enhance logging.

## Audit Findings

### 1. Inconsistent File Structures (Physics)
- **Master Index (`public/questionnaire/master-index.csv`)**:
  - Defines `topic_id` as `phys-t1`.
  - Defines `topic_folder` as `phy-t1`.
- **Questionnaire Folder**: `public/questionnaire/Physics/phys-t1/` (Mismatch: uses ID instead of folder name).
- **StudyGuide Folder**: `public/studyguide/Physics/phy-t1/` (Matches folder name from index).
- **Impact**: `csvService.loadQuizQuestions` fails because it constructs path using `topic_folder` (`phy-t1`) but the directory is `phys-t1`.

### 2. Data Transformation Issues
- `src/services/unifiedDataService.js` correctly reads `topic_folder` from the CSV.
- `src/services/DataTransformer.js` **discards** `topic_folder` when creating the topic object.
- **Impact**: UI components (like `PostSectionReview`) only have access to `topic.id` (`phys-t1`). When they try to fetch additional resources (misconceptions), they construct the path using the ID, which might work if folders matched IDs, but inconsistent with `unifiedDataService` which uses `folder`.

### 3. Missing & Unused Files
- `public/studyguide/master-index.csv`: Appears obsolete/unused. The app uses `questionnaire/master-index.csv` as the source of truth.
- `public/Handout/`: Structure is inconsistent (`Physics/Newtons_Laws`). Does not match `phy-t1` convention. Likely unused or broken.
- `sections.csv`: Missing for Physics (`phy-t1`). Required for rendering the study guide structure properly.
- `misconceptions.csv`: Missing for Physics.

### 4. Logging & Error Handling
- `Logger.js` is basic. Does not support structured context (e.g., "loading file X").
- `DataTransformer` is likely case-sensitive (needs verification), which causes fragility if CSV headers change case (e.g., `Topic_ID` vs `topic_id`).
- `PostSectionReview` blocks navigation ("Next" button) if it fails to load misconceptions/quizzes, instead of failing gracefully.

## Planned Actions
1.  **Infrastructure**: Enhance `Logger.js` and `DataTransformer.js`.
2.  **Standardization**:
    -   Rename `public/questionnaire/Physics/phys-t1` -> `phy-t1`.
    -   Update `DataTransformer` to pass `folder` property.
    -   Update `StudyGuide` to use `topic.folder` for fetching auxiliary files.
3.  **Cleanup**: Delete `public/studyguide/master-index.csv` and `public/Handout` (if confirmed unused).
4.  **Content**: Add missing `sections.csv` and `content.csv` for Physics.
